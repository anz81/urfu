Сделано обновление шаблонов и связанных с ними данных документов при добавлении в схемы новых элементов

В ручном режиме нужно будет выполнить следующие скрипты:

deleteDisciplinesData.bat
deleteModulesData.bat
silentUpdateModuleTemplate.bat
silentUpdateDisciplineTemplate.bat

!!! При этом удалятся все сохраненные документы. !!!

Далее можно будет обновлять шаблоны и документы только скриптами:
silentUpdateModuleTemplate.bat
silentUpdateDisciplineTemplate.bat
+ еще два скрипта для ГИА и Практик, которые нужно создать.

В режиме разработки в дженкинс эти скрипты можно добавить на пост-билд задачу, или в ручном режиме запускать их после обновления.

Текущая реализация обновления умеет обрабатывать только новые элементы схем. 
Если какие-либо существующие элементы переименовываются - то обновление не возможно.
Если какие-либо существующие элементы удаляются - то обновление не возможно. Этот вариант обновления можно реализовать при необходимости.

Процедура обновления:
1) Скрипт обновления получает текущую модель схемы (silentUpdateModuleTemplate - ModuleWorkingProgramFgosVoSchemaModel, silentUpdateDisciplineTemplate - DisciplineWorkingProgramFgosVoSchemaModel);
2) находит соответсвующий шаблон в базе по известному идентификатору (зашит в коде);
3) бежит по всем документам, привязанным к найденному шаблону и исправляет json данные в актуальной (последней) версии блока, в котором произошли изменения
4) если при обновлении какого-либо документа произошла ошибка, то ни один документ, как и сам шаблон не обновится.
5) Отчет (логи обновления) пишется в папку Urfu.Its.Web\Tools\Urfu.Its.Tools.VersionedDocuments\bin\Debug\Logs
6) Если ни одной ошибки нет, то все измененные блоки данных сохраняются в БД.

Вопросы к обсуждению:
1) Как выполнять обновление документов, которые успешно обновились, когда другая часть документов при обновлении вызвала ошибки.
Моё видение:
Предлагаю для документов, при обновлении которых возникли ошибки создавать другой шаблон (устаревший), нумеровать идентификаторы большими числами (за 1000), и перевязывать документы с ошибками на новый-устаревший шаблон. Успешно обновленные документы остаются на актуальном шаблоне. Дальнейшее обновление будет производиться только для ранее успешно-обновленных документов с актуальными шаблонами.
Актуальные идентификаторы для каждого из типа шаблона сейчас такие, такими же и останутся:
public static class VersionedDocumentTemplateIdentifiers
    {
        public static readonly int DisciplineWorkingProgramFgosVo  = 1;
        public static readonly int ModuleWorkingProgramFgosVo      = 2;
        public static readonly int GiaWorkingProgramFgosVo         = 3;
        public static readonly int PracticesWorkingProgramFgosVo   = 4;
        public static readonly int DisciplineWorkingProgramFgosVo3 = 5;
        public static readonly int ModuleWorkingProgramFgosVo3     = 6;
        public static readonly int GiaWorkingProgramFgosVo3        = 7;
        public static readonly int PracticesWorkingProgramFgosVo3  = 8;
    }


2) Не хорошо обновлять актуальные блоки. Кажется лучшим вариантом создавать новую версию блока при его обновлении. Сомнение в том, что у нас версионность блоков предполагалась использоваться для автоматического определения изменений в документе и формирания листов изменений.
 